{"version":3,"sources":["../js/custome-element.js"],"names":["PopUpInfo","shadow","attachShadow","mode","wrapper","document","createElement","setAttribute","icon","info","text","getAttribute","console","log","textContent","imgUrl","hasAttribute","img","src","appendChild","style","HTMLElement","customElements","define","CustomSquare","div","updateStyle","name","oldValue","newValue","elem","shadowRoot","childNodes","i","length","element","nodeName","window","addEventListener","add","querySelector","update","remove","square","disabled","random","min","max","Math","floor","onclick","body","removeChild"],"mappings":"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","file":"custome-element.98394778.js","sourceRoot":"../code/pages","sourcesContent":["// 自定义元素\nclass PopUpInfo extends HTMLElement {\n  constructor() {\n    super()\n\n    // 创建一个shadow root\n    var shadow = this.attachShadow({ mode: 'open' })\n    \n    var wrapper = document.createElement('span')\n    wrapper.setAttribute('class', 'wrapper')\n    var icon = document.createElement('span')\n    icon.setAttribute('class', 'icon')\n    icon.setAttribute('tabindex', 0)\n    var info = document.createElement('span')\n    info.setAttribute('class', 'info')\n\n    var text = this.getAttribute('text')\n    console.log(this.getAttribute('text'))\n    info.textContent = text\n\n    var imgUrl\n    if (this.hasAttribute('img')) {\n      imgUrl = this.getAttribute('img')\n    } else {\n      imgUrl = 'https://source.unsplash.com/random'\n    }\n\n    var img = document.createElement('img')\n    img.src = imgUrl\n    icon.appendChild(img)\n\n    var style = document.createElement('style')\n    \n    shadow.appendChild(style)\n    shadow.appendChild(wrapper)\n    wrapper.appendChild(icon)\n    wrapper.appendChild(info)\n  }\n}\n\ncustomElements.define('popup-info', PopUpInfo)\n\n// 自定义元素及其生命周期\nclass CustomSquare extends HTMLElement {\n  static get observedAttributes () {\n    return ['w', 'l']\n  }\n\n  constructor () {\n    super()\n\n    // \n    var shadow = this.attachShadow({ mode: 'open' })\n    var div = document.createElement('div')\n    var style = document.createElement('style')\n    shadow.appendChild(style)\n    shadow.appendChild(div)\n  }\n\n  connectedCallback () {\n    console.log('Custom square element added to page.')\n    updateStyle(this)\n  }\n\n  disconnectedCallback() {\n    console.log('Custom square element removed from page.');\n  }\n  \n  adoptedCallback() {\n    console.log('Custom square element moved to new page.');\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    console.log('Custom square element attributes changed.');\n    updateStyle(this);\n  }\n}\n\ncustomElements.define('custom-square', CustomSquare)\n\nfunction updateStyle (elem) {\n  var shadow = elem.shadowRoot\n  var childNodes = shadow.childNodes\n\n  for (let i = 0; i < childNodes.length; i++) {\n    const element = childNodes[i];\n    if (element.nodeName === 'STYLE') {\n      element.textContent = `\n        div {\n          width: ${elem.getAttribute('l')}px;\n          height: ${elem.getAttribute('l')}px;\n          background-color: ${elem.getAttribute('c')};\n        }\n      `\n    }\n  }\n}\n\nwindow.addEventListener('load', () => {\n  const add = document.querySelector('.add');\n  const update = document.querySelector('.update');\n  const remove = document.querySelector('.remove');\n  let square;\n\n  update.disabled = true;\n  remove.disabled = true;\n\n  function random(min, max) {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n  }\n\n  add.onclick = function() {\n    // Create a custom square element\n    square = document.createElement('custom-square');\n    square.setAttribute('l', '100');\n    square.setAttribute('c', 'red');\n    document.body.appendChild(square);\n\n    update.disabled = false;\n    remove.disabled = false;\n    add.disabled = true;\n  };\n\n  update.onclick = function() {\n    // Randomly update square's attributes\n    square.setAttribute('l', random(50, 200));\n    square.setAttribute('c', `rgb(${random(0, 255)}, ${random(0, 255)}, ${random(0, 255)})`);\n  };\n\n  remove.onclick = function() {\n    // Remove the square\n    document.body.removeChild(square);\n\n    update.disabled = true;\n    remove.disabled = true;\n    add.disabled = false;\n  };\n})"]}